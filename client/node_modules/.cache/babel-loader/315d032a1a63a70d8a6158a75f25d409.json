{"ast":null,"code":"import _objectSpread from \"E:\\\\Web Dev\\\\Complete React Dev2020\\\\Course Projects\\\\react-online-store-app\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:\\\\Web Dev\\\\Complete React Dev2020\\\\Course Projects\\\\react-online-store-app\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"E:\\\\Web Dev\\\\Complete React Dev2020\\\\Course Projects\\\\react-online-store-app\\\\client\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react'; //styled component:\n\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport HomePage from \"./pages/homepage/homepage.component\";\nimport ShopPage from \"./pages/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignInandSingOut from \"./pages/sign-in-and-sign-out/sign-in-and-sign-out.component\";\nimport CheckOutPage from \"./pages/checkout/checkout.component\"; //selectors:\n\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"./redux/user/user.selectors\"; //redux needed library\n\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user.actions\"; //spinner animation\n\nimport withSpinner from \".//components/with-spinner/with-spinner.component\";\nimport './App.css';\n\nconst App = ({\n  CurrentUser,\n  currentUser\n}) => {\n  //main menu spinner animation:\n  const HomePageWithSpinner = withSpinner(HomePage);\n\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoading = _useState2[0],\n        setIsLoading = _useState2[1];\n\n  useEffect(() => {\n    const persistDataOverRender = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          CurrentUser(_objectSpread({\n            id: snapShot.id\n          }, snapShot.data()));\n        });\n      }\n\n      CurrentUser(userAuth);\n    });\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 500);\n    return () => {\n      persistDataOverRender();\n    };\n  }, [CurrentUser]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: props => React.createElement(HomePageWithSpinner, Object.assign({\n      isLoading: isLoading\n    }, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/shop\",\n    component: ShopPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/checkout\",\n    component: CheckOutPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    render: () => currentUser ? React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }) : React.createElement(Redirect, {\n      to: \"/shop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })));\n};\n\nconst mapToStateProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n});\n\nconst mapDispatchToProps = dispatch => ({\n  CurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(mapToStateProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["E:/Web Dev/Complete React Dev2020/Course Projects/react-online-store-app/client/src/App.js"],"names":["React","useState","useEffect","Route","Switch","Redirect","auth","createUserProfileDocument","HomePage","ShopPage","Header","SignInandSingOut","CheckOutPage","createStructuredSelector","selectCurrentUser","connect","setCurrentUser","withSpinner","App","CurrentUser","currentUser","HomePageWithSpinner","isLoading","setIsLoading","persistDataOverRender","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","setTimeout","props","mapToStateProps","mapDispatchToProps","dispatch","user"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\n//styled component:\n\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\"\n\nimport HomePage from \"./pages/homepage/homepage.component\";\nimport ShopPage  from \"./pages/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignInandSingOut from \"./pages/sign-in-and-sign-out/sign-in-and-sign-out.component\";\nimport CheckOutPage from \"./pages/checkout/checkout.component\";\n\n//selectors:\nimport {createStructuredSelector} from \"reselect\";\nimport {selectCurrentUser} from \"./redux/user/user.selectors\";\n\n//redux needed library\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user.actions\"\n\n//spinner animation\nimport withSpinner from \".//components/with-spinner/with-spinner.component\";\n\nimport './App.css';\n\n\nconst App = ({ CurrentUser, currentUser }) => {\n\n//main menu spinner animation:\nconst HomePageWithSpinner = withSpinner(HomePage);\nconst [isLoading, setIsLoading ] = useState(true);\n  \n  useEffect(() => {\n    const persistDataOverRender = auth.onAuthStateChanged(async userAuth => {\n     \n      if (userAuth) {\n        const userRef =  await createUserProfileDocument(userAuth);\n        \n        userRef.onSnapshot(snapShot => {   \n          CurrentUser({      \n             id: snapShot.id,\n             ...snapShot.data()        \n          });   \n        });\n      }\n        CurrentUser(userAuth);\n    });\n   \n    setTimeout(() => {\n        setIsLoading(false);\n      }, 500)\n  \n      return () => {\n        persistDataOverRender()\n      }\n  }, [CurrentUser])\n\n    return (\n      <div>\n        <Header />\n          <Switch> \n            <Route exact path=\"/\"\n            render={(props) =>\n            <HomePageWithSpinner isLoading={isLoading} {...props}/>}/>        \n        \n            <Route path=\"/shop\" component={ShopPage}/>         \n            <Route path=\"/checkout\" component={CheckOutPage}/>\n            <Route exact path=\"/signin\" render={() =>\n              currentUser\n              ?\n              (<Redirect to =\"/\"/>)\n              :\n              (<Redirect to =\"/shop\" />)\n              } />\n         </Switch>   \n      </div>\n    );\n}\nconst mapToStateProps = createStructuredSelector ({\n  currentUser: selectCurrentUser,\n});\nconst mapDispatchToProps = (dispatch) => ({\n  CurrentUser: user => dispatch(setCurrentUser(user))\n});\nexport default connect(mapToStateProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}